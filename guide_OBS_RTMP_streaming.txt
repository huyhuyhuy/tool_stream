‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üé• H∆Ø·ªöNG D·∫™N STREAMING V·ªöI OBS + NGINX-RTMP SERVER T·ª∞ TRI·ªÇN KHAI
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üìå T·ªîNG QUAN GI·∫¢I PH√ÅP:
- VPS: Nginx-RTMP server nh·∫≠n stream t·ª´ OBS ‚Üí xu·∫•t HLS cho viewers
- Windows: OBS Studio stream l√™n VPS server v·ªõi ch·∫•t l∆∞·ª£ng cao (60 FPS)
- Viewers: Truy c·∫≠p http://VPS_IP ƒë·ªÉ xem live stream ch·∫•t l∆∞·ª£ng HD/4K

üéØ ∆ØU ƒêI·ªÇM:
‚úÖ OBS Studio - ph·∫ßn m·ªÅm streaming chuy√™n nghi·ªáp #1 th·∫ø gi·ªõi
‚úÖ Hardware encoding t·ªëi ∆∞u (NVENC/QuickSync/AMF) 
‚úÖ 60+ FPS m∆∞·ª£t m√† v·ªõi ch·∫•t l∆∞·ª£ng 4K
‚úÖ Giao di·ªán ƒë·∫πp v·ªõi scenes, overlays, transitions
‚úÖ Nhi·ªÅu ngu·ªìn: desktop, window, webcam, audio mixing
‚úÖ Server ri√™ng - kh√¥ng ph·ª• thu·ªôc YouTube/Twitch
‚úÖ Bandwidth kh√¥ng gi·ªõi h·∫°n - stream 24/7
‚úÖ ƒê·ªô tr·ªÖ th·∫•p (~2-5 gi√¢y)
‚úÖ Nhi·ªÅu ng∆∞·ªùi xem c√πng l√∫c ·ªïn ƒë·ªãnh

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
PH·∫¶N 1: TRI·ªÇN KHAI NGINX-RTMP SERVER TR√äN VPS UBUNTU
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

B∆∞·ªõc 1: SSH v√†o VPS v√† c·∫≠p nh·∫≠t h·ªá th·ªëng
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
ssh root@45.76.190.6

# C·∫≠p nh·∫≠t h·ªá th·ªëng
apt update && apt upgrade -y

# C√†i ƒë·∫∑t c√°c tools c·∫ßn thi·∫øt
apt install -y wget curl nano htop net-tools

B∆∞·ªõc 2: C√†i ƒë·∫∑t Nginx v·ªõi RTMP module
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# C√†i ƒë·∫∑t dependencies
apt install -y build-essential libpcre3 libpcre3-dev zlib1g zlib1g-dev libssl-dev libgd-dev libxml2 libxml2-dev uuid-dev

# T·∫°o th∆∞ m·ª•c build
mkdir -p ~/nginx_rtmp_build && cd ~/nginx_rtmp_build

# Download Nginx source
wget http://nginx.org/download/nginx-1.24.0.tar.gz
tar -xzf nginx-1.24.0.tar.gz

# Download nginx-rtmp-module
wget https://github.com/arut/nginx-rtmp-module/archive/master.zip
apt install -y unzip
unzip master.zip

B∆∞·ªõc 3: Compile Nginx v·ªõi RTMP module
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cd nginx-1.24.0

./configure \
  --prefix=/etc/nginx \
  --sbin-path=/usr/sbin/nginx \
  --modules-path=/usr/lib/nginx/modules \
  --conf-path=/etc/nginx/nginx.conf \
  --error-log-path=/var/log/nginx/error.log \
  --http-log-path=/var/log/nginx/access.log \
  --pid-path=/var/run/nginx.pid \
  --lock-path=/var/run/nginx.lock \
  --http-client-body-temp-path=/var/cache/nginx/client_temp \
  --http-proxy-temp-path=/var/cache/nginx/proxy_temp \
  --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp \
  --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp \
  --http-scgi-temp-path=/var/cache/nginx/scgi_temp \
  --user=nginx \
  --group=nginx \
  --with-compat \
  --with-file-aio \
  --with-threads \
  --with-http_addition_module \
  --with-http_auth_request_module \
  --with-http_dav_module \
  --with-http_flv_module \
  --with-http_gunzip_module \
  --with-http_gzip_static_module \
  --with-http_mp4_module \
  --with-http_random_index_module \
  --with-http_realip_module \
  --with-http_secure_link_module \
  --with-http_slice_module \
  --with-http_ssl_module \
  --with-http_stub_status_module \
  --with-http_sub_module \
  --with-http_v2_module \
  --with-stream \
  --with-stream_realip_module \
  --with-stream_ssl_module \
  --with-stream_ssl_preread_module \
  --add-module=../nginx-rtmp-module-master

# Compile v√† install
make && make install

B∆∞·ªõc 4: T·∫°o user v√† th∆∞ m·ª•c c·∫ßn thi·∫øt
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# T·∫°o nginx user
useradd --system --home /var/cache/nginx --shell /sbin/nologin --comment "nginx user" --user-group nginx

# T·∫°o th∆∞ m·ª•c cache
mkdir -p /var/cache/nginx
chown -R nginx:nginx /var/cache/nginx

# T·∫°o th∆∞ m·ª•c cho HLS streams
mkdir -p /var/www/html/hls
mkdir -p /var/www/html/dash
chown -R nginx:nginx /var/www/html
chmod 755 /var/www/html/hls
chmod 755 /var/www/html/dash

# T·∫°o th∆∞ m·ª•c recordings (optional)
mkdir -p /var/recordings
chown -R nginx:nginx /var/recordings

B∆∞·ªõc 5: T·∫°o file c·∫•u h√¨nh nginx.conf
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cat > /etc/nginx/nginx.conf << 'EOF'
user nginx;
worker_processes auto;
error_log /var/log/nginx/error.log warn;
pid /run/nginx.pid;

events {
    worker_connections 1024;
    use epoll;
    multi_accept on;
}

# RTMP Configuration for OBS Streaming
rtmp {
    server {
        listen 1935;
        chunk_size 4096;
        allow publish all;
        
        # Main live application
        application live {
            live on;
            
            # Enable HLS (HTTP Live Streaming)
            hls on;
            hls_path /var/www/html/hls;
            hls_fragment 2s;
            hls_playlist_length 10s;
            hls_continuous on;
            hls_cleanup on;
            hls_nested on;
            
            # Enable DASH (Dynamic Adaptive Streaming)
            dash on;
            dash_path /var/www/html/dash;
            dash_fragment 2s;
            dash_playlist_length 10s;
            dash_nested on;
            dash_cleanup on;
            
            # Optional: Enable recording
            record all;
            record_path /var/recordings;
            record_unique on;
            record_suffix .flv;
            record_append on;
            
            # Optional: Enable authentication (uncomment if needed)
            # publish_notify on;
            # play_notify on;
            
            # Stream quality variants (optional)
            exec_push ffmpeg -i rtmp://localhost/live/$name 
              -c:v libx264 -preset veryfast -tune zerolatency -crf 23 -g 60 -keyint_min 60 
              -c:a aac -b:a 128k -ac 2 -ar 44100 
              -f flv rtmp://localhost/live_hd/$name;
        }
        
        # HD variant application (optional)
        application live_hd {
            live on;
            allow publish 127.0.0.1;
            deny publish all;
            
            hls on;
            hls_path /var/www/html/hls_hd;
            hls_fragment 2s;
            hls_playlist_length 10s;
            hls_continuous on;
            hls_cleanup on;
        }
        
        # Play application for playback
        application play {
            live on;
            play /var/recordings;
        }
    }
}

# HTTP Configuration
http {
    include /etc/nginx/mime.types;
    default_type application/octet-stream;
    
    # Logging format
    log_format main '$remote_addr - $remote_user [$time_local] "$request" '
                    '$status $body_bytes_sent "$http_referer" '
                    '"$http_user_agent" "$http_x_forwarded_for"';
    
    access_log /var/log/nginx/access.log main;
    
    # Performance settings
    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;
    client_max_body_size 100M;
    
    # Gzip compression
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css text/xml text/javascript application/javascript application/xml+rss application/json;
    
    # Main server for streaming
    server {
        listen 80;
        server_name _;
        
        # Security headers
        add_header X-Frame-Options "SAMEORIGIN";
        add_header X-Content-Type-Options "nosniff";
        add_header X-XSS-Protection "1; mode=block";
        
        # CORS headers for streaming
        add_header Access-Control-Allow-Origin *;
        add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';
        add_header Access-Control-Allow-Headers 'DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range';
        add_header Access-Control-Expose-Headers 'Content-Length,Content-Range';

        # Root directory
        root /var/www/html;
        index index.html;

        # Main page
        location / {
            try_files $uri $uri/ /index.html;
        }

        # HLS streaming endpoint
        location /hls {
            types {
                application/vnd.apple.mpegurl m3u8;
                video/mp2t ts;
            }
            root /var/www/html;
            expires -1;
            add_header Cache-Control no-cache;
            add_header Access-Control-Allow-Origin *;
            
            # Optional: Add authentication
            # auth_basic "Stream Access";
            # auth_basic_user_file /etc/nginx/.htpasswd;
        }
        
        # HLS HD streaming endpoint
        location /hls_hd {
            types {
                application/vnd.apple.mpegurl m3u8;
                video/mp2t ts;
            }
            root /var/www/html;
            expires -1;
            add_header Cache-Control no-cache;
            add_header Access-Control-Allow-Origin *;
        }

        # DASH streaming endpoint
        location /dash {
            types {
                application/dash+xml mpd;
                video/mp4 mp4;
            }
            root /var/www/html;
            expires -1;
            add_header Cache-Control no-cache;
            add_header Access-Control-Allow-Origin *;
        }

        # RTMP statistics page
        location /stats {
            rtmp_stat all;
            rtmp_stat_stylesheet stat.xsl;
            auth_basic "RTMP Stats";
            auth_basic_user_file /etc/nginx/.htpasswd;
        }

        location /stat.xsl {
            root /etc/nginx/;
        }
        
        # API endpoint for stream status
        location /api/stream {
            rtmp_stat all;
            rtmp_stat_format json;
            add_header Access-Control-Allow-Origin *;
        }
        
        # Health check endpoint
        location /health {
            access_log off;
            return 200 "healthy\n";
            add_header Content-Type text/plain;
        }
    }
}
EOF

B∆∞·ªõc 6: T·∫°o systemd service cho Nginx
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cat > /etc/systemd/system/nginx.service << 'EOF'
[Unit]
Description=The nginx HTTP and reverse proxy server
Documentation=http://nginx.org/en/docs/
After=network-online.target remote-fs.target nss-lookup.target
Wants=network-online.target

[Service]
Type=forking
PIDFile=/run/nginx.pid
ExecStartPre=/usr/sbin/nginx -t -q
ExecStart=/usr/sbin/nginx
ExecStartPost=/bin/sleep 0.1
ExecReload=/bin/kill -s HUP $MAINPID
ExecStop=/bin/kill -s TERM $MAINPID
KillSignal=SIGQUIT
TimeoutStopSec=5
KillMode=mixed
PrivateTmp=true
LimitNOFILE=65536

[Install]
WantedBy=multi-user.target
EOF

B∆∞·ªõc 7: C·∫•u h√¨nh firewall
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# M·ªü port cho HTTP (80)
ufw allow 80/tcp

# M·ªü port cho RTMP (1935) 
ufw allow 1935/tcp

# Optional: M·ªü HTTPS (443) n·∫øu c·∫ßn SSL
ufw allow 443/tcp

# Ki·ªÉm tra firewall status
ufw status

B∆∞·ªõc 8: Kh·ªüi ƒë·ªông Nginx service
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Reload systemd
systemctl daemon-reload

# Enable nginx service
systemctl enable nginx

# Start nginx
systemctl start nginx

# Ki·ªÉm tra status
systemctl status nginx

# Ki·ªÉm tra nginx ƒëang listen tr√™n port n√†o
netstat -tulpn | grep nginx

B∆∞·ªõc 9: Ki·ªÉm tra c·∫•u h√¨nh
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Test nginx configuration
nginx -t

# Ki·ªÉm tra logs n·∫øu c√≥ l·ªói
tail -f /var/log/nginx/error.log

# Ki·ªÉm tra access logs
tail -f /var/log/nginx/access.log

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
PH·∫¶N 2: T·∫†O GIAO DI·ªÜN WEB VIEWER CHO KH√ÅCH XEM STREAM
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

B∆∞·ªõc 10: T·∫°o file index.html v·ªõi player chuy√™n nghi·ªáp
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
cat > /var/www/html/index.html << 'EOF'
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé• Live Stream - OBS + Nginx RTMP</title>
    <link href="https://vjs.zencdn.net/8.5.2/video.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientShift 3s ease infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .subtitle {
            font-size: 1.3rem;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .live-indicator {
            display: inline-flex;
            align-items: center;
            background: rgba(255, 0, 0, 0.8);
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            margin-top: 10px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .live-dot {
            width: 12px;
            height: 12px;
            background: white;
            border-radius: 50%;
            margin-right: 8px;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .video-container {
            background: rgba(0,0,0,0.3);
            border-radius: 20px;
            padding: 20px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .video-wrapper {
            position: relative;
            background: #000;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
        }

        #videoPlayer {
            width: 100%;
            max-width: 100%;
            height: auto;
            display: block;
        }

        .controls-panel {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn {
            background: rgba(255,255,255,0.15);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            background: rgba(255,255,255,0.25);
            border-color: rgba(255,255,255,0.5);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn.primary {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border-color: transparent;
        }

        .btn.primary:hover {
            background: linear-gradient(45deg, #ff5252, #26d0ce);
        }

        .status {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            border-radius: 15px;
            font-weight: bold;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .status.loading {
            background: rgba(255, 193, 7, 0.2);
            border: 2px solid #ffc107;
            color: #ffc107;
        }

        .status.live {
            background: rgba(40, 167, 69, 0.2);
            border: 2px solid #28a745;
            color: #28a745;
        }

        .status.error {
            background: rgba(220, 53, 69, 0.2);
            border: 2px solid #dc3545;
            color: #dc3545;
        }

        .status.offline {
            background: rgba(108, 117, 125, 0.2);
            border: 2px solid #6c757d;
            color: #6c757d;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .info-card {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            transition: transform 0.3s ease;
        }

        .info-card:hover {
            transform: translateY(-5px);
        }

        .info-card h3 {
            color: #ffc107;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .info-card ul {
            list-style: none;
        }

        .info-card li {
            margin: 8px 0;
            padding: 5px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .info-card li:last-child {
            border-bottom: none;
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .quality-selector {
            margin: 15px 0;
            text-align: center;
        }

        .quality-selector select {
            background: rgba(0,0,0,0.5);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            padding: 8px 15px;
            font-size: 14px;
        }

        .stats-overlay {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            z-index: 10;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .controls-panel {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 200px;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé• Live Stream</h1>
            <p class="subtitle">OBS Studio + Nginx RTMP Streaming</p>
            <div class="live-indicator" id="liveIndicator" style="display: none;">
                <div class="live-dot"></div>
                LIVE
            </div>
        </div>

        <div class="video-container">
            <div class="video-wrapper">
                <div class="stats-overlay" id="statsOverlay" style="display: none;">
                    <div id="statsText">Connecting...</div>
                </div>
                <video 
                    id="videoPlayer"
                    class="video-js vjs-default-skin"
                    controls
                    preload="auto"
                    data-setup='{"fluid": true, "responsive": true}'
                    poster="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjQ1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMzMzIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPldhaXRpbmcgZm9yIHN0cmVhbS4uLjwvdGV4dD48L3N2Zz4=">
                    <p class="vjs-no-js">
                        To view this video please enable JavaScript, and consider upgrading to a web browser that
                        <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>.
                    </p>
                </video>
            </div>

            <div class="quality-selector">
                <label for="qualitySelect" style="margin-right: 10px;">Quality:</label>
                <select id="qualitySelect">
                    <option value="auto">Auto</option>
                    <option value="hd">HD (Original)</option>
                    <option value="sd">SD (Transcoded)</option>
                </select>
            </div>

            <div class="controls-panel">
                <button class="btn primary" onclick="refreshStream()">
                    üîÑ Refresh Stream
                </button>
                <button class="btn" onclick="toggleFullscreen()">
                    üì∫ Fullscreen
                </button>
                <button class="btn" onclick="toggleMute()">
                    üîä Mute/Unmute
                </button>
                <button class="btn" onclick="showStats()">
                    üìä Stats
                </button>
            </div>
        </div>

        <div id="status" class="status loading">
            <div class="loading-spinner"></div>
            üîÑ Connecting to stream...
        </div>

        <div class="info-grid">
            <div class="info-card">
                <h3>üìã Stream Information</h3>
                <ul>
                    <li><strong>Server:</strong> 45.76.190.6</li>
                    <li><strong>RTMP Port:</strong> 1935</li>
                    <li><strong>Protocol:</strong> HLS (HTTP Live Streaming)</li>
                    <li><strong>Supported Quality:</strong> Up to 4K @ 60 FPS</li>
                    <li><strong>Latency:</strong> ~2-5 seconds</li>
                    <li><strong>Compatibility:</strong> All browsers, mobile devices</li>
                </ul>
            </div>

            <div class="info-card">
                <h3>üéÆ OBS Studio Settings</h3>
                <ul>
                    <li><strong>Stream Type:</strong> Custom Streaming Server</li>
                    <li><strong>URL:</strong> rtmp://45.76.190.6/live</li>
                    <li><strong>Stream Key:</strong> your_stream_key</li>
                    <li><strong>Video Bitrate:</strong> 2500-6000 kbps</li>
                    <li><strong>Audio Bitrate:</strong> 160 kbps</li>
                    <li><strong>FPS:</strong> 30-60 FPS</li>
                </ul>
            </div>

            <div class="info-card">
                <h3>üîß Troubleshooting</h3>
                <ul>
                    <li>Make sure OBS is streaming to the server</li>
                    <li>Check your internet connection</li>
                    <li>Try refreshing the page</li>
                    <li>Verify the stream key is correct</li>
                    <li>Check server status at /stats</li>
                    <li>Contact admin if issues persist</li>
                </ul>
            </div>

            <div class="info-card">
                <h3>üåê Share This Stream</h3>
                <ul>
                    <li><strong>Direct Link:</strong> http://45.76.190.6</li>
                    <li><strong>HLS URL:</strong> http://45.76.190.6/hls/your_stream_key.m3u8</li>
                    <li><strong>Mobile Friendly:</strong> ‚úÖ Yes</li>
                    <li><strong>Works on:</strong> PC, Mobile, Smart TV</li>
                    <li><strong>No plugins required</strong></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Video.js JavaScript -->
    <script src="https://vjs.zencdn.net/8.5.2/video.min.js"></script>
    
    <script>
        let player;
        let currentStreamKey = 'your_stream_key'; // Default stream key
        let statsInterval;
        let streamCheckInterval;

        // Initialize Video.js player
        document.addEventListener('DOMContentLoaded', function() {
            player = videojs('videoPlayer', {
                controls: true,
                fluid: true,
                responsive: true,
                preload: 'auto',
                autoplay: 'muted',
                liveui: true,
                html5: {
                    hlsjs: {
                        enableWorker: true,
                        lowLatencyMode: true
                    }
                }
            });

            // Initialize stream
            initializeStream();
            
            // Check for stream every 10 seconds
            streamCheckInterval = setInterval(checkStreamStatus, 10000);
            
            // Quality selector
            document.getElementById('qualitySelect').addEventListener('change', function(e) {
                switchQuality(e.target.value);
            });
        });

        function initializeStream() {
            updateStatus('Connecting to stream...', 'loading');
            
            // Try to detect stream key from URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            const streamKey = urlParams.get('stream') || urlParams.get('key') || 'your_stream_key';
            currentStreamKey = streamKey;
            
            loadStream('auto');
        }

        function loadStream(quality) {
            let streamUrl;
            
            switch(quality) {
                case 'hd':
                    streamUrl = `/hls/${currentStreamKey}.m3u8`;
                    break;
                case 'sd':
                    streamUrl = `/hls_hd/${currentStreamKey}.m3u8`;
                    break;
                default:
                    streamUrl = `/hls/${currentStreamKey}.m3u8`;
            }
            
            console.log('Loading stream:', streamUrl);
            
            player.src({
                src: streamUrl,
                type: 'application/x-mpegURL'
            });
            
            // Event listeners
            player.on('loadstart', function() {
                updateStatus('Loading stream...', 'loading');
            });
            
            player.on('canplay', function() {
                updateStatus('üî¥ LIVE - Stream is active', 'live');
                showLiveIndicator(true);
                startStatsUpdate();
            });
            
            player.on('error', function(e) {
                console.error('Player error:', e);
                updateStatus('Stream offline or unavailable', 'error');
                showLiveIndicator(false);
                stopStatsUpdate();
            });
            
            player.on('waiting', function() {
                updateStatus('Buffering...', 'loading');
            });
            
            player.on('playing', function() {
                updateStatus('üî¥ LIVE - Stream is active', 'live');
                showLiveIndicator(true);
            });
            
            player.on('ended', function() {
                updateStatus('Stream ended', 'offline');
                showLiveIndicator(false);
            });
        }

        function updateStatus(message, type) {
            const statusElement = document.getElementById('status');
            statusElement.className = `status ${type}`;
            
            let icon = '';
            switch(type) {
                case 'loading': icon = '<div class="loading-spinner"></div>üîÑ'; break;
                case 'live': icon = 'üî¥'; break;
                case 'error': icon = '‚ùå'; break;
                case 'offline': icon = '‚≠ï'; break;
            }
            
            statusElement.innerHTML = icon + ' ' + message;
        }

        function showLiveIndicator(show) {
            const indicator = document.getElementById('liveIndicator');
            indicator.style.display = show ? 'inline-flex' : 'none';
        }

        function refreshStream() {
            console.log('Refreshing stream...');
            updateStatus('Refreshing stream...', 'loading');
            showLiveIndicator(false);
            
            // Reload the current stream
            const currentQuality = document.getElementById('qualitySelect').value;
            loadStream(currentQuality);
        }

        function switchQuality(quality) {
            console.log('Switching to quality:', quality);
            loadStream(quality);
        }

        function toggleFullscreen() {
            if (player.isFullscreen()) {
                player.exitFullscreen();
            } else {
                player.requestFullscreen();
            }
        }

        function toggleMute() {
            player.muted(!player.muted());
        }

        function startStatsUpdate() {
            if (statsInterval) clearInterval(statsInterval);
            
            statsInterval = setInterval(function() {
                if (player && !player.paused()) {
                    const stats = {
                        currentTime: Math.floor(player.currentTime()),
                        buffered: player.bufferedEnd(),
                        bandwidth: 'Unknown'
                    };
                    
                    document.getElementById('statsText').innerHTML = 
                        `Live | Buffer: ${Math.max(0, stats.buffered - stats.currentTime).toFixed(1)}s`;
                    document.getElementById('statsOverlay').style.display = 'block';
                }
            }, 1000);
        }

        function stopStatsUpdate() {
            if (statsInterval) {
                clearInterval(statsInterval);
                statsInterval = null;
            }
            document.getElementById('statsOverlay').style.display = 'none';
        }

        function showStats() {
            const statsOverlay = document.getElementById('statsOverlay');
            if (statsOverlay.style.display === 'none') {
                startStatsUpdate();
            } else {
                stopStatsUpdate();
            }
        }

        async function checkStreamStatus() {
            try {
                const response = await fetch('/api/stream');
                const data = await response.json();
                
                // Process stream status data
                console.log('Stream status:', data);
                
            } catch (error) {
                console.log('Could not fetch stream status:', error);
            }
        }

        // Auto-retry connection if stream fails
        let retryCount = 0;
        const maxRetries = 5;

        function autoRetry() {
            if (retryCount < maxRetries) {
                retryCount++;
                console.log(`Retry attempt ${retryCount}/${maxRetries}`);
                setTimeout(() => {
                    refreshStream();
                }, 5000);
            }
        }

        // Listen for stream errors and auto-retry
        if (player) {
            player.on('error', function() {
                setTimeout(autoRetry, 3000);
            });
        }

        // Reset retry count on successful play
        if (player) {
            player.on('playing', function() {
                retryCount = 0;
            });
        }

        // Cleanup on page unload
        window.addEventListener('beforeunload', function() {
            if (streamCheckInterval) clearInterval(streamCheckInterval);
            if (statsInterval) clearInterval(statsInterval);
            if (player) player.dispose();
        });
    </script>
</body>
</html>
EOF

B∆∞·ªõc 11: Thi·∫øt l·∫≠p quy·ªÅn cho web files
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Set ownership
chown -R nginx:nginx /var/www/html

# Set permissions
chmod 755 /var/www/html
chmod 644 /var/www/html/index.html

B∆∞·ªõc 12: Optional - T·∫°o basic authentication cho stats
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# C√†i ƒë·∫∑t apache2-utils ƒë·ªÉ c√≥ htpasswd
apt install -y apache2-utils

# T·∫°o user admin cho stats (thay ƒë·ªïi password)
htpasswd -c /etc/nginx/.htpasswd admin

# Set quy·ªÅn cho file password
chown nginx:nginx /etc/nginx/.htpasswd
chmod 600 /etc/nginx/.htpasswd

B∆∞·ªõc 13: Restart v√† ki·ªÉm tra final
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Test nginx configuration
nginx -t

# Restart nginx
systemctl restart nginx

# Ki·ªÉm tra status
systemctl status nginx

# Ki·ªÉm tra ports
netstat -tulpn | grep nginx

# Test web server
curl -I http://localhost/

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
PH·∫¶N 3: C√ÄI ƒê·∫∂T V√Ä C·∫§U H√åNH OBS STUDIO TR√äN WINDOWS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

B∆∞·ªõc 14: Download v√† c√†i ƒë·∫∑t OBS Studio
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1. Truy c·∫≠p: https://obsproject.com/download
2. Click "Download OBS Studio" cho Windows
3. Ch·ªçn phi√™n b·∫£n 64-bit (khuy·∫øn ngh·ªã)
4. Ch·∫°y file installer v√† l√†m theo h∆∞·ªõng d·∫´n
5. Kh·ªüi ƒë·ªông OBS Studio

B∆∞·ªõc 15: C·∫•u h√¨nh OBS cho streaming ch·∫•t l∆∞·ª£ng cao
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

A. C·∫•u h√¨nh Video Settings:
1. Click "Settings" (ho·∫∑c File ‚Üí Settings)
2. Ch·ªçn tab "Video":
   - Base (Canvas) Resolution: 1920x1080 (ho·∫∑c resolution m√†n h√¨nh c·ªßa b·∫°n)
   - Output (Scaled) Resolution: 1920x1080 (cho HD) ho·∫∑c 1280x720 (cho hi·ªáu su·∫•t t·ªët h∆°n)
   - Downscale Filter: Lanczos (Sharpened scaling, 36 samples)
   - Common FPS Values: 30 ho·∫∑c 60 (t√πy theo hi·ªáu su·∫•t m√°y)

B. C·∫•u h√¨nh Output Settings:
1. Ch·ªçn tab "Output"
2. Output Mode: Advanced
3. Trong tab "Streaming":
   - Audio Track: 1
   - Encoder: 
     * Hardware (NVENC) n·∫øu c√≥ GPU NVIDIA: NVIDIA NVENC H.264
     * Hardware (QuickSync) n·∫øu c√≥ Intel iGPU: Intel Quick Sync Video H.264
     * Software n·∫øu kh√¥ng c√≥: x264
   
   C√†i ƒë·∫∑t cho x264 (Software):
   - Bitrate: 2500-6000 kbps (t√πy theo upload speed)
   - Keyframe Interval: 2 seconds
   - CPU Usage Preset: veryfast (ho·∫∑c faster n·∫øu CPU m·∫°nh)
   - Profile: high
   - Tune: zerolatency
   
   C√†i ƒë·∫∑t cho NVENC (Hardware):
   - Bitrate: 3000-8000 kbps
   - Keyframe Interval: 2 seconds
   - Preset: Quality
   - Profile: high
   - Look-ahead: Unchecked
   - Psycho Visual Tuning: Checked

C. C·∫•u h√¨nh Audio Settings:
1. Ch·ªçn tab "Audio":
   - Sample Rate: 48 khz
   - Channels: Stereo
   - Desktop Audio Device: Default (ho·∫∑c thi·∫øt b·ªã audio ch√≠nh)
   - Mic/Auxiliary Audio Device: Default (n·∫øu c√≥ microphone)

B∆∞·ªõc 16: C·∫•u h√¨nh Stream Settings
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1. Trong Settings, ch·ªçn tab "Stream":
   - Service: Custom...
   - Server: rtmp://45.76.190.6/live
   - Stream Key: your_stream_key (c√≥ th·ªÉ ƒë·∫∑t b·∫•t k·ª≥ t√™n g√¨, v√≠ d·ª•: mystream, live, test)

2. Click "OK" ƒë·ªÉ l∆∞u settings

B∆∞·ªõc 17: Thi·∫øt l·∫≠p Scene v√† Sources
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

A. T·∫°o Scene m·ªõi:
1. Trong Sources panel, click d·∫•u "+"
2. Ch·ªçn lo·∫°i source mu·ªën th√™m:

   ƒê·ªÉ capture to√†n b·ªô m√†n h√¨nh:
   - Ch·ªçn "Display Capture"
   - ƒê·∫∑t t√™n: "Desktop"
   - Click OK ‚Üí Create New ‚Üí OK
   - Ch·ªçn m√†n h√¨nh mu·ªën capture

   ƒê·ªÉ capture c·ª≠a s·ªï c·ª• th·ªÉ:
   - Ch·ªçn "Window Capture"  
   - ƒê·∫∑t t√™n: "Chrome Window"
   - Click OK ‚Üí Create New ‚Üí OK
   - Window: Ch·ªçn c·ª≠a s·ªï Chrome
   - Capture Method: Windows 10 (1903 and up)

   ƒê·ªÉ capture webcam:
   - Ch·ªçn "Video Capture Device"
   - ƒê·∫∑t t√™n: "Webcam"
   - Device: Ch·ªçn webcam
   - Resolution: 1920x1080 ho·∫∑c cao nh·∫•t c√≥ th·ªÉ

B. ƒêi·ªÅu ch·ªânh Sources:
1. Resize sources b·∫±ng c√°ch k√©o c√°c g√≥c
2. Di chuy·ªÉn b·∫±ng c√°ch click v√† k√©o
3. Thay ƒë·ªïi th·ª© t·ª± b·∫±ng c√°ch k√©o l√™n/xu·ªëng trong danh s√°ch

B∆∞·ªõc 18: T·ªëi ∆∞u h√≥a cho hi·ªáu su·∫•t
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

A. Advanced Settings:
1. Settings ‚Üí Advanced:
   - Process Priority: High
   - Renderer: Direct3D 11
   - Color Format: NV12
   - Color Space: 709
   - Color Range: Partial

B. Hotkeys (optional):
1. Settings ‚Üí Hotkeys:
   - Start Streaming: Ctrl+Shift+S
   - Stop Streaming: Ctrl+Shift+T
   - Start Recording: Ctrl+Shift+R

C. Performance Tips:
1. ƒê√≥ng c√°c ·ª©ng d·ª•ng kh√¥ng c·∫ßn thi·∫øt
2. Ch·∫°y OBS v·ªõi quy·ªÅn Administrator
3. T·∫Øt Windows Game Mode n·∫øu c√≥ v·∫•n ƒë·ªÅ
4. Ki·ªÉm tra task manager ƒë·ªÉ xem CPU/GPU usage

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
PH·∫¶N 4: B·∫ÆT ƒê·∫¶U STREAMING V√Ä KI·ªÇM TRA
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

B∆∞·ªõc 19: B·∫Øt ƒë·∫ßu streaming t·ª´ OBS
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1. Trong OBS Studio:
   - Ki·ªÉm tra Preview c√≥ hi·ªÉn th·ªã ƒë√∫ng source kh√¥ng
   - Click "Start Streaming" (g√≥c d∆∞·ªõi b√™n ph·∫£i)
   - ƒê·ª£i kho·∫£ng 5-10 gi√¢y ƒë·ªÉ stream kh·ªüi t·∫°o

2. Ki·ªÉm tra status trong OBS:
   - G√≥c d∆∞·ªõi b√™n ph·∫£i s·∫Ω hi·ªán th√¥ng tin:
     * "LIVE" indicator (m√†u ƒë·ªè)
     * Bitrate hi·ªán t·∫°i
     * FPS output
     * Dropped frames (n√™n l√† 0%)

B∆∞·ªõc 20: Ki·ªÉm tra stream tr√™n web
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1. M·ªü browser v√† truy c·∫≠p: http://45.76.190.6
2. K·∫øt qu·∫£ mong ƒë·ª£i:
   - Trang web load v·ªõi video player ƒë·∫πp
   - Video t·ª± ƒë·ªông ph√°t sau 5-10 gi√¢y
   - Status hi·ªÉn th·ªã "LIVE - Stream is active"
   - C√≥ th·ªÉ ƒëi·ªÅu khi·ªÉn volume, fullscreen

3. Test tr√™n mobile device:
   - M·ªü browser tr√™n ƒëi·ªán tho·∫°i
   - Truy c·∫≠p c√πng URL
   - Stream s·∫Ω ho·∫°t ƒë·ªông m∆∞·ª£t m√†

B∆∞·ªõc 21: Ki·ªÉm tra stream statistics
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1. Truy c·∫≠p: http://45.76.190.6/stats
2. ƒêƒÉng nh·∫≠p v·ªõi username/password ƒë√£ t·∫°o ·ªü B∆∞·ªõc 12
3. Ki·ªÉm tra:
   - Number of clients connected
   - Bitrate incoming
   - Stream uptime
   - Bandwidth usage

B∆∞·ªõc 22: Chia s·∫ª stream v·ªõi m·ªçi ng∆∞·ªùi
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üì∫ Link xem stream ch√≠nh: http://45.76.190.6

üîó Link HLS direct (cho players kh√°c): 
   http://45.76.190.6/hls/your_stream_key.m3u8

üì± Mobile friendly: Ho·∫°t ƒë·ªông tr√™n t·∫•t c·∫£ thi·∫øt b·ªã

üåç No geographic restrictions: Ai c≈©ng c√≥ th·ªÉ xem

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
PH·∫¶N 5: TROUBLESHOOTING V√Ä T·ªêI ∆ØU H√ìA
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

V·∫•n ƒë·ªÅ th∆∞·ªùng g·∫∑p v√† c√°ch kh·∫Øc ph·ª•c:

Problem 1: OBS kh√¥ng connect ƒë∆∞·ª£c t·ªõi server
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Solution:
- Ki·ªÉm tra firewall VPS: ufw status
- Ki·ªÉm tra nginx service: systemctl status nginx
- Ki·ªÉm tra port 1935: netstat -tulpn | grep 1935
- Test connection: telnet 45.76.190.6 1935

Problem 2: Video kh√¥ng hi·ªÉn th·ªã tr√™n web
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Solution:
- Ki·ªÉm tra HLS files ƒë∆∞·ª£c t·∫°o: ls -la /var/www/html/hls/
- Ki·ªÉm tra nginx logs: tail -f /var/log/nginx/error.log
- Ki·ªÉm tra browser console (F12) ƒë·ªÉ xem l·ªói JavaScript
- Th·ª≠ refresh stream ho·∫∑c ƒë·ªïi browser

Problem 3: Stream b·ªã lag ho·∫∑c buffer
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Solution:
- Gi·∫£m bitrate trong OBS (2500 kbps)
- Gi·∫£m resolution xu·ªëng 720p
- Gi·∫£m FPS xu·ªëng 30
- Ki·ªÉm tra upload speed: speedtest.net
- ƒê·ªïi encoder sang Hardware (NVENC) n·∫øu c√≥

Problem 4: Audio kh√¥ng c√≥ ho·∫∑c kh√¥ng sync
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Solution:
- Ki·ªÉm tra Audio Mixer trong OBS
- Desktop Audio device ph·∫£i ƒë∆∞·ª£c ch·ªçn ƒë√∫ng
- Audio bitrate: 160 kbps
- Sample rate: 48 khz

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
PH·∫¶N 6: N√ÇNG CAO V√Ä T·ªêI ∆ØU H√ìA
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

B∆∞·ªõc 23: C·∫•u h√¨nh SSL/HTTPS (Optional nh∆∞ng khuy·∫øn ngh·ªã)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# C√†i ƒë·∫∑t Certbot
apt install -y certbot python3-certbot-nginx

# L·∫•y SSL certificate (thay ƒë·ªïi domain)
certbot --nginx -d yourdomain.com

# Auto renewal
crontab -e
# Th√™m d√≤ng: 0 12 * * * /usr/bin/certbot renew --quiet

B∆∞·ªõc 24: Monitoring v√† Analytics
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# C√†i ƒë·∫∑t monitoring tools
apt install -y htop iotop iftop

# Monitor real-time
htop          # CPU v√† RAM usage
iotop         # Disk I/O
iftop         # Network traffic

# Log rotation cho nginx
cat > /etc/logrotate.d/nginx << 'EOF'
/var/log/nginx/*.log {
    daily
    missingok
    rotate 14
    compress
    delaycompress
    notifempty
    create 0644 nginx nginx
    postrotate
        systemctl reload nginx
    endscript
}
EOF

B∆∞·ªõc 25: Backup v√† Security
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Backup c·∫•u h√¨nh
tar -czf nginx_rtmp_backup_$(date +%Y%m%d).tar.gz /etc/nginx/ /var/www/html/

# Security headers (th√™m v√†o server block)
add_header X-Frame-Options "DENY";
add_header X-Content-Type-Options "nosniff";
add_header X-XSS-Protection "1; mode=block";
add_header Strict-Transport-Security "max-age=31536000" always;

# Fail2ban cho b·∫£o v·ªá server
apt install -y fail2ban

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
T·ªîNG K·∫æT V√Ä H∆Ø·ªöNG D·∫™N S·ª¨ D·ª§NG H√ÄNG NG√ÄY
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üéØ QUY TR√åNH S·ª¨ D·ª§NG H√ÄNG NG√ÄY:

1. **Kh·ªüi ƒë·ªông stream:**
   - M·ªü OBS Studio
   - Ki·ªÉm tra Scene v√† Audio levels
   - Click "Start Streaming"
   - ƒê·ª£i 5-10 gi√¢y ƒë·ªÉ stream ·ªïn ƒë·ªãnh

2. **Chia s·∫ª v·ªõi kh√°n gi·∫£:**
   - Send link: http://45.76.190.6
   - Stream ho·∫°t ƒë·ªông tr√™n m·ªçi thi·∫øt b·ªã
   - Kh√¥ng c·∫ßn c√†i ƒë·∫∑t g√¨ th√™m

3. **Monitor stream:**
   - Ki·ªÉm tra OBS stats (FPS, dropped frames)
   - Truy c·∫≠p /stats ƒë·ªÉ xem viewer count
   - Monitor server: htop, iftop

4. **K·∫øt th√∫c stream:**
   - Click "Stop Streaming" trong OBS
   - Stream s·∫Ω t·ª± ƒë·ªông disconnect kh·ªèi server

üöÄ TH√îNG S·ªê ƒê·ªÄ XU·∫§T CHO CH·∫§T L∆Ø·ª¢NG T·ªêI ∆ØU:

**Cho stream HD ch·∫•t l∆∞·ª£ng cao:**
- Resolution: 1920x1080
- FPS: 60
- Bitrate: 6000 kbps
- Encoder: NVENC (n·∫øu c√≥ GPU NVIDIA)
- Audio: 160 kbps, 48 khz

**Cho stream ·ªïn ƒë·ªãnh (khuy·∫øn ngh·ªã):**
- Resolution: 1280x720
- FPS: 30
- Bitrate: 2500 kbps
- Encoder: Hardware encoding
- Audio: 128 kbps, 44.1 khz

**Cho m·∫°ng y·∫øu:**
- Resolution: 854x480
- FPS: 30
- Bitrate: 1000 kbps
- Encoder: x264 veryfast
- Audio: 96 kbps

‚ö° PERFORMANCE TIPS:

‚úÖ S·ª≠ d·ª•ng Hardware encoding (NVENC/QuickSync/AMF)
‚úÖ ƒê√≥ng c√°c ·ª©ng d·ª•ng kh√¥ng c·∫ßn thi·∫øt khi stream
‚úÖ Ch·∫°y OBS v·ªõi quy·ªÅn Administrator
‚úÖ Ki·ªÉm tra upload speed tr∆∞·ªõc khi stream (√≠t nh·∫•t 1.5x bitrate)
‚úÖ Monitor CPU usage (kh√¥ng n√™n qu√° 80%)
‚úÖ Ki·ªÉm tra dropped frames trong OBS (n√™n < 1%)

üé• K·∫æT QU·∫¢ CU·ªêI C√ôNG:

‚úÖ Server RTMP chuy√™n nghi·ªáp tr√™n VPS ri√™ng
‚úÖ Stream ch·∫•t l∆∞·ª£ng HD/4K v·ªõi OBS Studio
‚úÖ Web viewer ƒë·∫πp, responsive, t∆∞∆°ng th√≠ch m·ªçi thi·∫øt b·ªã  
‚úÖ Kh√¥ng gi·ªõi h·∫°n th·ªùi gian stream (24/7)
‚úÖ Kh√¥ng ph·ª• thu·ªôc YouTube/Twitch
‚úÖ Bandwidth kh√¥ng gi·ªõi h·∫°n
‚úÖ ƒê·ªô tr·ªÖ th·∫•p (~2-5 gi√¢y)
‚úÖ D·ªÖ d√†ng chia s·∫ª v·ªõi b·∫•t k·ª≥ ai

üéâ CH√öC M·ª™NG! B·∫†N ƒê√É C√ì H·ªÜ TH·ªêNG STREAMING CHUY√äN NGHI·ªÜP! üéâ

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
H·∫æT H∆Ø·ªöNG D·∫™N - ENJOY YOUR STREAMING! üöÄ
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
